<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Color Blindness Corrector Using Shaders # Problem statement # People with colour vision deficiency find it difficult to identify and distinguish between certain colours.
Colour vision deficiency is not usually anything to be concerned about.
Most people get used to it over time, it will not normally get any worse, and it&rsquo;s rarely a sign of anything serious.
But it can sometimes cause issues such as:
Difficulty at school if colours are used to help with learning Problems with food, such as identifying whether meat is fully cooked or whether fruit is ripe Getting medications confused if they&rsquo;re not clearly labelled Trouble identifying safety warnings or signs Slightly limited career choices – certain jobs, such as pilots, train drivers, electricians and air traffic controllers, may require accurate colour recognition Background # Definition # Color blindness is a reduced ability to distinguish between color when compared to the standard for normal human color vision."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Color Blindness Corrector Using Shaders # Problem statement # People with colour vision deficiency find it difficult to identify and distinguish between certain colours.
Colour vision deficiency is not usually anything to be concerned about.
Most people get used to it over time, it will not normally get any worse, and it&rsquo;s rarely a sign of anything serious.
But it can sometimes cause issues such as:
Difficulty at school if colours are used to help with learning Problems with food, such as identifying whether meat is fully cooked or whether fruit is ripe Getting medications confused if they&rsquo;re not clearly labelled Trouble identifying safety warnings or signs Slightly limited career choices – certain jobs, such as pilots, train drivers, electricians and air traffic controllers, may require accurate colour recognition Background # Definition # Color blindness is a reduced ability to distinguish between color when compared to the standard for normal human color vision."><meta property="og:type" content="article"><meta property="og:url" content="https://AlejandroUN.github.io/docs/shortcodes/Workshop3/color-blindness-shaders/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-06-27T23:58:59-05:00"><title>Color Blindness Shaders | Visual Computing</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.bff310aa1360089a6e404aae88e1d297f104cf36138f715aadc03d1b40742743.js integrity="sha256-v/MQqhNgCJpuQEquiOHSl/EEzzYTj3FarcA9G0B0J0M=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Visual Computing</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/docs/shortcodes/log/>Log</a></li><li><a href=/docs/shortcodes/Workshop1/blindness/>Blindness</a></li><li><a href=/docs/shortcodes/Workshop1/solids/>Solids</a></li><li><a href=/docs/shortcodes/Workshop2/mainSpaces/>Main Spaces</a></li><li><a href=/docs/shortcodes/Workshop2/Rasterization/>Rasterization</a></li><li><a href=/docs/shortcodes/Workshop3/color-blindness-shaders/ class=active>Color Blindness Shaders</a></li><li><a href=/docs/shortcodes/Workshop3/color-brightness/>Color Brightness</a></li><li><a href=/docs/shortcodes/Workshop3/image-processing/>Image Processing</a></li><li><a href=/docs/shortcodes/Workshop3/procedural-texturing/>Procedural Texturing</a></li><li><a href=/docs/shortcodes/Workshop3/uv-visualization/>Uv Visualization</a></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Color Blindness Shaders</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#color-blindness-corrector-using-shaders><strong>Color Blindness Corrector Using Shaders</strong></a><ul><li><a href=#problem-statement><strong>Problem statement</strong></a></li><li><a href=#background><strong>Background</strong></a><ul><li></li></ul></li><li><a href=#code-solution--results><strong>Code (solution) & results</strong></a><ul><li></li></ul></li><li><a href=#conclusions><strong>Conclusions</strong></a></li><li><a href=#references><strong>References</strong></a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=color-blindness-corrector-using-shaders><strong>Color Blindness Corrector Using Shaders</strong>
<a class=anchor href=#color-blindness-corrector-using-shaders>#</a></h1><h2 id=problem-statement><strong>Problem statement</strong>
<a class=anchor href=#problem-statement>#</a></h2><p>People with colour vision deficiency find it difficult to identify and distinguish between certain colours.</p><p>Colour vision deficiency is not usually anything to be concerned about.</p><p>Most people get used to it over time, it will not normally get any worse, and it&rsquo;s rarely a sign of anything serious.</p><p>But it can sometimes cause issues such as:</p><ul><li>Difficulty at school if colours are used to help with learning</li><li>Problems with food, such as identifying whether meat is fully cooked or whether fruit is ripe</li><li>Getting medications confused if they&rsquo;re not clearly labelled</li><li>Trouble identifying safety warnings or signs</li><li>Slightly limited career choices – certain jobs, such as pilots, train drivers, electricians and air traffic controllers, may require accurate colour recognition</li></ul><h2 id=background><strong>Background</strong>
<a class=anchor href=#background>#</a></h2><h4 id=definition><strong>Definition</strong>
<a class=anchor href=#definition>#</a></h4><p>Color blindness is a <em>reduced ability to distinguish between color</em> when compared to the standard for normal human color vision. When a person is color blind, also called color vision deficiency (CVD), they usually have difficulty distinguishing between certain colors such as yellow and orange, green and brown, pink and gray, or blue and purple.</p><h4 id=types><strong>Types</strong>
<a class=anchor href=#types>#</a></h4><ul><li><strong>Red-green</strong> color blindness, which includes protan-type CVD (protanomaly and protanopia) and deutan-type CVD (deuteranomaly and deuteranopia).</li><li>Tritan-type CVD, also called <strong>blue-yellow</strong> color blindness which is associated with the inability to see shades of blue, and confusions between blue and green colors. Blue-yellow color blindness is usually caused by age-related eye conditions such as glaucoma, or exposure to certain chemicals or medical treatments.</li><li>In very rare cases, a person can be completely color blind, meaning they see only the intensity of light, but not its color. This is called <strong>monochromacy</strong> or achromatopsia.</li></ul><table><tr><td><img src=../../../shortcodes/resources/images/normalVision.jpg alt="Normal Vision"></td><td><img src=../../../shortcodes/resources/images/deutanBlindness.jpg alt="Deutan-type blindness"></td></tr><tr><td><img src=../../../shortcodes/resources/images/protanBlindness.jpg alt="Protan Vision"></td><td><img src=../../../shortcodes/resources/images/monochromacyBlindness.jpg alt="Deutan-type blindness"></td></tr></table><h4 id=solutions><strong>Solutions</strong>
<a class=anchor href=#solutions>#</a></h4><p>EnChroma has developed optical lens technology that selectively filters out wavelengths of light at the precise point where the confusion or excessive overlap of color sensitivity occurs. This increases contrast between the red and green color signals, alleviating symptoms of color blindness for a richer experience of the world.</p><p>EnChroma color blind glasses are uniquely engineered to give those with color blindness the ability to see a broader spectrum of bright color. Utilizing a patented light filter technique, EnChroma’s lens technology is applied with mathematical precision to address common forms of red-green colorblindness. Although EnChroma glasses are not a cure, they are helpful for approximately 80% of people with color blindness.</p><p>There are different algorithms to enable people with color blindness to make it easier to differentiate color spectrums that are difficult for them, such as the LMS Daltonization algorithm, Color-blind Filter Service (CBFS) algorithm, LAB color corrector algorithm, and the shifting color algorithm.</p><p>For people with Protanopia or Tritanopia, the LMS algorithm is better than CBFS algorithm as the LMS algorithm only changes color of con-fused areas with no change in the brightness. For people with Deuteranopia, the LAB color correction is better than the LMS algorithm.</p><h4 id=the-lms-algorithm><strong>The LMS algorithm</strong>
<a class=anchor href=#the-lms-algorithm>#</a></h4><p>The LMS algorithm in the developed application is implemented for Protanopia, Duteranopia, and Tritanopia. It is the most famous algorithm used for color-blindness correction. Its idea is to use the information lost in the simulation of color blindness and use LMS color space to compensate colors missing in each group/type of cones, long (L), medium (M), and short (S)</p><ol><li>Convert RGB image to LMS color space using equation</li></ol><td><img src=../../../shortcodes/resources/images/LMSalgorithm/1.jpg alt="First step"></td><ol start=2><li>Simulate color-blindness using equation for Protanopia, for Deuteranopia and for Tritanopia</li></ol><td><img src=../../../shortcodes/resources/images/LMSalgorithm/2.jpg alt="Second step"></td><ol start=3><li>Convert LMS back to RGB using equation</li></ol><td><img src=../../../shortcodes/resources/images/LMSalgorithm/3.jpg alt="Third step"></td><ol start=4><li>Find Difference between original and simulated images</li></ol><td><img src=../../../shortcodes/resources/images/LMSalgorithm/4.jpg alt="Fourth step"></td><ol start=5><li>Shift colors towards visible spectrum by multiplying by error matrices</li></ol><td><img src=../../../shortcodes/resources/images/LMSalgorithm/5.jpg alt="Fifth step"></td><ol start=6><li>Add shifted colors to original image</li></ol><td><img src=../../../shortcodes/resources/images/LMSalgorithm/6.jpg alt="Sixth step"></td><h4 id=testing-for-color-blindness><strong>Testing for Color Blindness</strong>
<a class=anchor href=#testing-for-color-blindness>#</a></h4><p>The Ishihara test for color blindness is named after a Japanese ophthalmologist Shinobu Ishihara who invented the test for the Japanese army in 1917. Ishihara has been a good screening test, but it is 100 years old and does not leverage the benefits of today’s computer-based adaptive testing protocols.</p><img src=../../../shortcodes/resources/images/ishihara_test.png alt="Ishihara test"><h2 id=code-solution--results><strong>Code (solution) & results</strong>
<a class=anchor href=#code-solution--results>#</a></h2><h4 id=code-solution><strong>Code (solution)</strong>
<a class=anchor href=#code-solution>#</a></h4><details><summary>colorBlindnessCorrector.js</summary><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript:/sketches/brushHand.js data-lang=JavaScript:/sketches/brushHand.js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>correctorShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>blindnessType</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>input</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>reset</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>correctorShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/sketches/workshop3/blindness.frag&#39;</span>, { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/docs/shortcodes/resources/images/ishiharaTest/Ishihara_00.jpg&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>700</span>, <span style=color:#ae81ff>500</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>correctorShader</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRadio</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;1&#39;</span>, <span style=color:#e6db74>&#39;RGB&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;5&#39;</span>, <span style=color:#e6db74>&#39;Correct Protanopia&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;6&#39;</span>, <span style=color:#e6db74>&#39;Correct Deuteranopia&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;7&#39;</span>, <span style=color:#e6db74>&#39;Correct Tritanopia&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;1&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>changed</span>(() =&gt; <span style=color:#a6e22e>correctorShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;blindnessType&#39;</span>, <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>value</span>()));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createButton</span>(<span style=color:#e6db74>&#34;Reset&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reset</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>450</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createFileInput</span>(<span style=color:#a6e22e>handleFile</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>480</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reset</span>.<span style=color:#a6e22e>mousePressed</span>(() =&gt; <span style=color:#a6e22e>correctorShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>correctorShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>correctorShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;blindnessType&#39;</span>, <span style=color:#a6e22e>blindnessType</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>quad</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleFile</span>(<span style=color:#a6e22e>file</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>file</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;image&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>correctorShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>blindness.frag</summary><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript:/sketches/brushHand.js data-lang=JavaScript:/sketches/brushHand.js><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// uniforms are defined and sent by the sketch
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>blindnessType</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>texture</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// interpolated texcoord (same name and type as in vertex shader)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texcoords2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// returns simulated protanopia color of given texel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>protanopia</span>(<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>texel</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return 0.299 * texel.r + 0.+587 * texel.g + 0.114 * texel.b;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>17.8824</span>, <span style=color:#ae81ff>3.45565</span>, <span style=color:#ae81ff>0.0299566</span>, <span style=color:#ae81ff>43.5161</span>, <span style=color:#ae81ff>27.1554</span>, <span style=color:#ae81ff>0.184309</span>, <span style=color:#ae81ff>4.11935</span>, <span style=color:#ae81ff>3.86714</span>, <span style=color:#ae81ff>1.46709</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>r</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>g</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>tex</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>protanopia</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>2.02344</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.52581</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMSP</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>protanopia</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>LMS</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>BackRGB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0809444479</span>, <span style=color:#ae81ff>0.113614708</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span>, <span style=color:#ae81ff>0.116721066</span>, <span style=color:#ae81ff>0.0540193266</span>, <span style=color:#ae81ff>0.693511405</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>RP</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BackRGB</span><span style=color:#f92672>*</span><span style=color:#a6e22e>LMSP</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>RP</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// returns corrected protanopia color of given texel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>cprotanopia</span>(<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>texel</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return 0.299 * texel.r + 0.+587 * texel.g + 0.114 * texel.b;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>17.8824</span>, <span style=color:#ae81ff>3.45565</span>, <span style=color:#ae81ff>0.0299566</span>, <span style=color:#ae81ff>43.5161</span>, <span style=color:#ae81ff>27.1554</span>, <span style=color:#ae81ff>0.184309</span>, <span style=color:#ae81ff>4.11935</span>, <span style=color:#ae81ff>3.86714</span>, <span style=color:#ae81ff>1.46709</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>r</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>g</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>tex</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>protanopia</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>2.02344</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.52581</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMSP</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>protanopia</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>LMS</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>BackRGB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0809444479</span>, <span style=color:#ae81ff>0.113614708</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span>, <span style=color:#ae81ff>0.116721066</span>, <span style=color:#ae81ff>0.0540193266</span>, <span style=color:#ae81ff>0.693511405</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>RP</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BackRGB</span><span style=color:#f92672>*</span><span style=color:#a6e22e>LMSP</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>Diff</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>RP</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>EMP</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.7</span>, <span style=color:#ae81ff>0.7</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>VEP</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>EMP</span><span style=color:#f92672>*</span><span style=color:#a6e22e>Diff</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>CIP</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>VEP</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>CIP</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return vec3(texel.r,texel.g,texel.b);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// returns deuteranopia color of given texel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>duteranopia</span>(<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>texel</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return 0.299 * texel.r + 0.587 * texel.g + 0.114 * texel.b;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>17.8824</span>, <span style=color:#ae81ff>3.45565</span>, <span style=color:#ae81ff>0.0299566</span>, <span style=color:#ae81ff>43.5161</span>, <span style=color:#ae81ff>27.1554</span>, <span style=color:#ae81ff>0.184309</span>, <span style=color:#ae81ff>4.11935</span>, <span style=color:#ae81ff>3.86714</span>, <span style=color:#ae81ff>1.46709</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>r</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>g</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>tex</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>duteranopia</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.49421</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.24827</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMSD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>duteranopia</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>LMS</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>BackRGB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0809444479</span>, <span style=color:#ae81ff>0.113614708</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span>, <span style=color:#ae81ff>0.116721066</span>, <span style=color:#ae81ff>0.0540193266</span>, <span style=color:#ae81ff>0.693511405</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>RD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BackRGB</span><span style=color:#f92672>*</span><span style=color:#a6e22e>LMSD</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>RD</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// returns corrected deuteranopia color of given texel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>cduteranopia</span>(<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>texel</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return 0.299 * texel.r + 0.587 * texel.g + 0.114 * texel.b;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>17.8824</span>, <span style=color:#ae81ff>3.45565</span>, <span style=color:#ae81ff>0.0299566</span>, <span style=color:#ae81ff>43.5161</span>, <span style=color:#ae81ff>27.1554</span>, <span style=color:#ae81ff>0.184309</span>, <span style=color:#ae81ff>4.11935</span>, <span style=color:#ae81ff>3.86714</span>, <span style=color:#ae81ff>1.46709</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>r</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>g</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>tex</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>duteranopia</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.49421</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.24827</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMSD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>duteranopia</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>LMS</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>BackRGB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0809444479</span>, <span style=color:#ae81ff>0.113614708</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span>, <span style=color:#ae81ff>0.116721066</span>, <span style=color:#ae81ff>0.0540193266</span>, <span style=color:#ae81ff>0.693511405</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>RD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BackRGB</span><span style=color:#f92672>*</span><span style=color:#a6e22e>LMSD</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>Diff</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>RD</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>EMD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.7</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.7</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>VED</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>EMD</span><span style=color:#f92672>*</span><span style=color:#a6e22e>Diff</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>CID</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>VED</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>CID</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return vec3(texel.r,texel.g,texel.b);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// returns simulated tritanopia color of given texel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>tritanopia</span>(<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>texel</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return 0.299 * texel.r + 0.587 * texel.g + 0.114 * texel.b;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>17.8824</span>, <span style=color:#ae81ff>3.45565</span>, <span style=color:#ae81ff>0.0299566</span>, <span style=color:#ae81ff>43.5161</span>, <span style=color:#ae81ff>27.1554</span>, <span style=color:#ae81ff>0.184309</span>, <span style=color:#ae81ff>4.11935</span>, <span style=color:#ae81ff>3.86714</span>, <span style=color:#ae81ff>1.46709</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>r</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>g</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>tex</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>tritanopia</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.395913</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.801109</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMST</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tritanopia</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>LMS</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>BackRGB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0809444479</span>, <span style=color:#ae81ff>0.113614708</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span>, <span style=color:#ae81ff>0.116721066</span>, <span style=color:#ae81ff>0.0540193266</span>, <span style=color:#ae81ff>0.693511405</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>RT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BackRGB</span><span style=color:#f92672>*</span><span style=color:#a6e22e>LMST</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>RT</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return vec3(texel.r,texel.g,texel.b);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// returns corrected tritanopia color of given texel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>ctritanopia</span>(<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>texel</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return 0.299 * texel.r + 0.587 * texel.g + 0.114 * texel.b;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>17.8824</span>, <span style=color:#ae81ff>3.45565</span>, <span style=color:#ae81ff>0.0299566</span>, <span style=color:#ae81ff>43.5161</span>, <span style=color:#ae81ff>27.1554</span>, <span style=color:#ae81ff>0.184309</span>, <span style=color:#ae81ff>4.11935</span>, <span style=color:#ae81ff>3.86714</span>, <span style=color:#ae81ff>1.46709</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>r</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>g</span>,<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>const1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>tex</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>tritanopia</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.395913</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.801109</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>LMST</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tritanopia</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>LMS</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>BackRGB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>0.0809444479</span>, <span style=color:#ae81ff>0.113614708</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span>, <span style=color:#ae81ff>0.116721066</span>, <span style=color:#ae81ff>0.0540193266</span>, <span style=color:#ae81ff>0.693511405</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>RT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BackRGB</span><span style=color:#f92672>*</span><span style=color:#a6e22e>LMST</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>Diff</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>RT</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mat3</span> <span style=color:#a6e22e>EMT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mat3</span>(<span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.7</span>, <span style=color:#ae81ff>0.7</span>, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>VET</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>EMT</span><span style=color:#f92672>*</span><span style=color:#a6e22e>Diff</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>CIT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tex</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>VET</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>CIT</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>//return vec3(texel.r,texel.g,texel.b);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>texel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>texcoords2</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>blindnessType</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>((<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>duteranopia</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>rgb</span>))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>blindnessType</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>6</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>((<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>cduteranopia</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>rgb</span>))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>blindnessType</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>7</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>((<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>ctritanopia</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>rgb</span>))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>blindnessType</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>((<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>cprotanopia</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>rgb</span>))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>blindnessType</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>((<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>tritanopia</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>rgb</span>))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>blindnessType</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>((<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>protanopia</span>(<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>rgb</span>))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texel</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><style>iframe div label{margin-right:20px}</style><iframe id=blindness style=width:725px;height:525px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/sketches/workshop3/blindness.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h4 id=results><strong>Results</strong>
<a class=anchor href=#results>#</a></h4><p>Image seen from the point of view of a person with no color blindness</p><td><img src=../../../shortcodes/resources/images/ishiharaTest/Ishihara_01.jpg alt=Normal></td><p>Image seen from the point of view of a person with protanopia</p><td><img src=../../../shortcodes/resources/images/Protanopia/Protanopia1.jpg alt="Third step"></td><p>Corrected image from the point of view of a person seen with protanopia</p><td><img src=../../../shortcodes/resources/images/Protanopia/CorrectedSeenProtanopia1.jpg alt="Third step"></td><h2 id=conclusions><strong>Conclusions</strong>
<a class=anchor href=#conclusions>#</a></h2><ul><li>Color blindness affects a large number of individuals, with protans and deutans being the most common types.</li><li>Color blindness affects approximately every 1 in 12 men (8%) and 1 in 200 women (0.5%).</li><li>Image correction is possible, depending on the type of color blindness of the user, to facilitate the task of distinguishing colors that are more difficult to discern.</li></ul><h2 id=references><strong>References</strong>
<a class=anchor href=#references>#</a></h2><ul><li><a href=https://enchroma.com/pages/what-is-color-blindness>Enchroma. What is color blindness?</a></li><li><a href=https://enchroma.com/pages/types-of-color-blindness>Enchroma. Types of Color Blindness</a></li><li><a href=https://www.northcountryeyecare.com/eyeglasses/enchroma-lenses-for-colorblindness/>North Country Eye Care. Enchroma Lenses for Colorblindness</a></li><li><a href=https://www.nhs.uk/conditions/colour-vision-deficiency/>National Health Service (NHS). Colour vision deficiency</a></li><li><a href=https://www.researchgate.net/publication/326626897_Smartphone_Based_Image_Color_Correction_for_Color_Blindness>Smartphone Based Image Color Correction for Color Blindness</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/AlejandroUN//commit/5d95841883f067f1c8c04b7cb3480b30186cfbb3 title='Last modified by Alejandro Chávez | June 28, 2022' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 28, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#color-blindness-corrector-using-shaders><strong>Color Blindness Corrector Using Shaders</strong></a><ul><li><a href=#problem-statement><strong>Problem statement</strong></a></li><li><a href=#background><strong>Background</strong></a><ul><li></li></ul></li><li><a href=#code-solution--results><strong>Code (solution) & results</strong></a><ul><li></li></ul></li><li><a href=#conclusions><strong>Conclusions</strong></a></li><li><a href=#references><strong>References</strong></a></li></ul></li></ul></nav></div></aside></main></body></html>
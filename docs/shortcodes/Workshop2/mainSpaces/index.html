<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Main Spaces 3D Brush Based using a Camera # Introduction # A 3d brush was implemented using the concepts of scene trees using the p5.treegl library and the handPose ml5 library.
Background # Scene trees # Scene trees are a concept used for the spatial and graphical representation of a scene using matrices and a graph representation, more specifically that of a tree as the graph has no cycles."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Main Spaces 3D Brush Based using a Camera # Introduction # A 3d brush was implemented using the concepts of scene trees using the p5.treegl library and the handPose ml5 library.
Background # Scene trees # Scene trees are a concept used for the spatial and graphical representation of a scene using matrices and a graph representation, more specifically that of a tree as the graph has no cycles."><meta property="og:type" content="article"><meta property="og:url" content="https://AlejandroUN.github.io/docs/shortcodes/Workshop2/mainSpaces/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-06-21T10:07:03-05:00"><title>Main Spaces | Visual Computing</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.f41f6674a7aae8dfbaa7a1387b55947dcd344e103904bf14e7209a147f2e6cef.js integrity="sha256-9B9mdKeq6N+6p6E4e1WUfc00ThA5BL8U5yCaFH8ubO8=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Visual Computing</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/docs/shortcodes/log/>Log</a></li><li><a href=/docs/shortcodes/Workshop1/blindness/>Blindness</a></li><li><a href=/docs/shortcodes/Workshop1/solids/>Solids</a></li><li><a href=/docs/shortcodes/Workshop2/mainSpaces/ class=active>Main Spaces</a></li><li><a href=/docs/shortcodes/Workshop2/Rasterization/>Rasterization</a></li><li><a href=/docs/shortcodes/Workshop3/color-blindness-shaders/>Color Blindness Shaders</a></li><li><a href=/docs/shortcodes/Workshop3/color-brightness/>Color Brightness</a></li><li><a href=/docs/shortcodes/Workshop3/image-processing/>Image Processing</a></li><li><a href=/docs/shortcodes/Workshop3/procedural-texturing/>Procedural Texturing</a></li><li><a href=/docs/shortcodes/Workshop3/test/>Test</a></li><li><a href=/docs/shortcodes/Workshop3/uv-visualization/>Uv Visualization</a></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Main Spaces</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#main-spaces-3d-brush-based-using-a-camera><strong>Main Spaces 3D Brush Based using a Camera</strong></a><ul><li><a href=#introduction><strong>Introduction</strong></a></li><li><a href=#background><strong>Background</strong></a><ul><li></li></ul></li><li><a href=#methods><strong>Methods</strong></a></li><li><a href=#code-solution--results><strong>Code (solution) & results</strong></a></li><li><a href=#conclusions--future-work><strong>Conclusions & future work</strong></a></li><li><a href=#references><strong>References</strong></a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=main-spaces-3d-brush-based-using-a-camera><strong>Main Spaces 3D Brush Based using a Camera</strong>
<a class=anchor href=#main-spaces-3d-brush-based-using-a-camera>#</a></h1><h2 id=introduction><strong>Introduction</strong>
<a class=anchor href=#introduction>#</a></h2><p>A 3d brush was implemented using the concepts of scene trees using the p5.treegl library and the handPose ml5 library.</p><h2 id=background><strong>Background</strong>
<a class=anchor href=#background>#</a></h2><ul><li><h4 id=scene-trees><strong>Scene trees</strong>
<a class=anchor href=#scene-trees>#</a></h4></li></ul><p>Scene trees are a concept used for the spatial and graphical representation of a scene using matrices and a graph representation, more specifically that of a tree as the graph has no cycles.</p><img src=../../../shortcodes/resources/images/scene.jpg alt="Scene tree"><ul><li><h4 id=machine-learning><strong>Machine Learning</strong>
<a class=anchor href=#machine-learning>#</a></h4></li></ul><p>Machine learning is the use and development of computer systems that are able to learn and adapt without following explicit instructions, by using algorithms and statistical models to analyse and draw inferences from patterns in data.</p><img src=../../../shortcodes/resources/images/nn.png alt="Neural Networks"><h2 id=methods><strong>Methods</strong>
<a class=anchor href=#methods>#</a></h2><p>To obtain the depth value using the hand we use the ml5 handpose library that provides us with 20 points along the hand</p><img src=../../../shortcodes/resources/images/twentyPoints.jpg alt="All Points"><p>Then, to optimize the performance we only use the central point of the hand, corresponding to the one located at the knuckle of the middle finger.</p><img src=../../../shortcodes/resources/images/singlePoint.jpg alt="Single Point"><p>To know when the hand is opened and closed and thus vary the radius of the plotted spheres we use the differences in the y-axis between the fingertips and the palm of the hand, so, every time the hand is opened this difference is greater and every time the hand is closed this difference is smaller.</p><img src=../../../shortcodes/resources/images/openHand.jpg alt="Open Hand"><h2 id=code-solution--results><strong>Code (solution) & results</strong>
<a class=anchor href=#code-solution--results>#</a></h2><img src=../../../shortcodes/resources/images/hello.jpg alt="Scene tree">
<details><summary>treeLocation SCREEN to WORLD, 3d Brush using hand (using ml5 Handpose)</summary><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript:/sketches/brushHand.js data-lang=JavaScript:/sketches/brushHand.js><span style=display:flex><span><span style=color:#75715e>// Brush controls
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>depth</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>brush</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>easycam</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>escorzo</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>points</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//ml5 variables
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>handpose</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>video</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>hands</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Variables to do calculations to know if the hand is open or closed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>zeroPoint</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>onePoint</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>eightPoint</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>twelvePoint</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sixteenPoint</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>twentyPoint</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>oneDifference</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>twoDifference</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>threeDifference</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>fourthDifference</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>holeDifference</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>600</span>, <span style=color:#ae81ff>450</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// easycam stuff
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>,           <span style=color:#75715e>// scalar
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],       <span style=color:#75715e>// vector
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>rotation</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>],  <span style=color:#75715e>// quaternion
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  };
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createEasyCam</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>;   <span style=color:#75715e>// state to use on reset (double-click/tap)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>state</span>, <span style=color:#ae81ff>2000</span>); <span style=color:#75715e>// now animate to that state
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// brush stuff
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>points</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#e6db74>&#39;#ed225d&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>position</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>70</span>, <span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// select initial brush
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>brush</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sphereBrush</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Activate video
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>video</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCapture</span>(<span style=color:#a6e22e>VIDEO</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>size</span>(<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>handpose</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ml5</span>.<span style=color:#a6e22e>handpose</span>(<span style=color:#a6e22e>video</span>, <span style=color:#a6e22e>modelReady</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// This sets up an event that fills the global variable &#34;predictions&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// with an array every time new hand poses are detected
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>handpose</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#34;hand&#34;</span>, <span style=color:#a6e22e>results</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hands</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>results</span>;
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>120</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>0.8</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#39;magenta&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>grid</span>({ <span style=color:#a6e22e>dotted</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span> });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>axes</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>point</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>points</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>point</span>.<span style=color:#a6e22e>worldPosition</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>brush</span>(<span style=color:#a6e22e>point</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>modelReady</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Model ready!&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>update</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>handDistance</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>hands</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hand</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hands</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>keypoint</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hand</span>.<span style=color:#a6e22e>landmarks</span>[<span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>handDistance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>hand</span>.<span style=color:#a6e22e>landmarks</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>keypoint</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hand</span>.<span style=color:#a6e22e>landmarks</span>[<span style=color:#a6e22e>j</span>];
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>j</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>//El valor de y disminuye cuando la mano sube
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			<span style=color:#75715e>//Hacia la izquierda de la imagen (en la vida real a la derecha de la persona) el valor de x disminuye, hacia la derecha aumenta
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		  <span style=color:#a6e22e>zeroPoint</span> <span style=color:#f92672>=</span> [<span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>1</span>]];
</span></span><span style=display:flex><span>		} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>j</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>		  <span style=color:#a6e22e>onePoint</span> <span style=color:#f92672>=</span> [<span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>1</span>]];
</span></span><span style=display:flex><span>		} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>j</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>8</span>) {
</span></span><span style=display:flex><span>		  <span style=color:#a6e22e>oneDifference</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>onePoint</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>+</span> (<span style=color:#a6e22e>onePoint</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>		} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>j</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>12</span>) {
</span></span><span style=display:flex><span>		  <span style=color:#a6e22e>twoDifference</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>onePoint</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>+</span> (<span style=color:#a6e22e>onePoint</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>		} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>j</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>16</span>) {
</span></span><span style=display:flex><span>		  <span style=color:#a6e22e>threeDifference</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>zeroPoint</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>zeroPoint</span>[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>+</span> (<span style=color:#a6e22e>onePoint</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>		} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>j</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>20</span>) {
</span></span><span style=display:flex><span>		  <span style=color:#a6e22e>fourthDifference</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>zeroPoint</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>zeroPoint</span>[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>+</span> (<span style=color:#a6e22e>onePoint</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>keypoint</span>[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>holeDifference</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>oneDifference</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>twoDifference</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>threeDifference</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>fourthDifference</span>
</span></span><span style=display:flex><span>	  }
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>handDistance</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>mouseX</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>pmouseX</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dy</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>mouseY</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>pmouseY</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>speed</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>((<span style=color:#a6e22e>dx</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>dy</span>) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> (<span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>height</span>)), <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>points</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>worldPosition</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>treeLocation</span>([<span style=color:#a6e22e>mouseX</span>, <span style=color:#a6e22e>mouseY</span>, <span style=color:#a6e22e>m</span>], { <span style=color:#a6e22e>from</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;SCREEN&#39;</span>, <span style=color:#a6e22e>to</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;WORLD&#39;</span> }),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>color</span>(),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>speed</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>speed</span>,
</span></span><span style=display:flex><span>	  <span style=color:#a6e22e>radius</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>holeDifference</span>, <span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>1050</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>m</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sphereBrush</span>(<span style=color:#a6e22e>point</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>  <span style=color:#75715e>// TODO parameterize sphere radius and / or
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// alpha channel according to gesture speed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>point</span>.<span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sphere</span>(<span style=color:#a6e22e>point</span>.<span style=color:#a6e22e>radius</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>keyPressed</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>key</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;r&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>record</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>key</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;p&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>escorzo</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>escorzo</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>escorzo</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>perspective</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>ortho</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>key</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;c&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>points</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><iframe id=brushHoleHand style=width:625px;height:475px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
             <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js></script> 
            
             <script src=https://unpkg.com/ml5@latest/dist/ml5.min.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            <script src=/sketches/brushHoleHand.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=conclusions--future-work><strong>Conclusions & future work</strong>
<a class=anchor href=#conclusions--future-work>#</a></h2><ul><li>Ml5 is viable as a tool as far as 2d plotting is concerned because its data for the &lsquo;x&rsquo; and &lsquo;y&rsquo; axes are quite accurate and stable, however, as far as 3d is concerned the &lsquo;z&rsquo; depth value is quite unstable and not very accurate.</li><li>We will try to use another way to obtain more precisely the desired depth, maybe something more practical and accurate like using some hardware</li></ul><h2 id=references><strong>References</strong>
<a class=anchor href=#references>#</a></h2><ul><li><a href=https://visualcomputing.github.io/docs/scene_trees/main_spaces/>Main Spaces</a></li><li><a href=https://learn.ml5js.org/#/reference/handpose>ml5 handpose</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/AlejandroUN//commit/141cfb16c120ba28b005ec3612e8bba81f227e8e title='Last modified by Diego | June 21, 2022' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 21, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#main-spaces-3d-brush-based-using-a-camera><strong>Main Spaces 3D Brush Based using a Camera</strong></a><ul><li><a href=#introduction><strong>Introduction</strong></a></li><li><a href=#background><strong>Background</strong></a><ul><li></li></ul></li><li><a href=#methods><strong>Methods</strong></a></li><li><a href=#code-solution--results><strong>Code (solution) & results</strong></a></li><li><a href=#conclusions--future-work><strong>Conclusions & future work</strong></a></li><li><a href=#references><strong>References</strong></a></li></ul></li></ul></nav></div></aside></main></body></html>